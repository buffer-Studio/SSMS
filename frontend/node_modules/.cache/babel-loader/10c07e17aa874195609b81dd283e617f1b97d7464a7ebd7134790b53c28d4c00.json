{"ast":null,"code":"var _jsxFileName = \"/home/buffer/Desktop/Exhibition/Computer/NewSSMS/frontend/src/components/ScheduleManagement.js\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport axios from 'axios';\nimport { toast } from 'sonner';\nimport { Button } from '../components/ui/button';\nimport { Label } from '../components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../components/ui/select';\nimport TimetableGrid from './TimetableGrid';\nimport { useAuth } from '../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ScheduleManagement = ({\n  teachers,\n  schedules,\n  breakAfter,\n  apiUrl,\n  onScheduleChange\n}) => {\n  _s();\n  const {\n    token\n  } = useAuth();\n  const [selectedTeacher, setSelectedTeacher] = useState(null);\n  const handleAddScheduleEntry = async (day, period) => {\n    if (!selectedTeacher) {\n      toast.error('Please select a teacher first');\n      return;\n    }\n    const teacher = teachers.find(t => t.id === selectedTeacher);\n    const subject = prompt('Enter subject name:');\n    const className = prompt('Enter class name:');\n    if (!subject || !className) return;\n    try {\n      await axios.post(`${apiUrl}/schedules`, {\n        teacher_id: teacher.id,\n        teacher_name: teacher.name,\n        day,\n        period,\n        subject,\n        class_name: className\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      toast.success('Schedule entry added');\n      onScheduleChange();\n    } catch {\n      toast.error('Failed to add schedule');\n    }\n  };\n  const handleScheduleClick = schedule => {\n    // This will be handled by parent component via props\n    // For now, just pass the schedule up\n    window.dispatchEvent(new CustomEvent('editSchedule', {\n      detail: schedule\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-4\",\n    \"x-file-name\": \"ScheduleManagement\",\n    \"x-line-number\": \"67\",\n    \"x-component\": \"div\",\n    \"x-id\": \"ScheduleManagement_67\",\n    \"x-dynamic\": \"false\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"glass p-6 rounded-2xl\",\n      \"x-file-name\": \"ScheduleManagement\",\n      \"x-line-number\": \"68\",\n      \"x-component\": \"div\",\n      \"x-id\": \"ScheduleManagement_68\",\n      \"x-dynamic\": \"false\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-6\",\n        \"x-file-name\": \"ScheduleManagement\",\n        \"x-line-number\": \"69\",\n        \"x-component\": \"div\",\n        \"x-id\": \"ScheduleManagement_69\",\n        \"x-dynamic\": \"false\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold text-gray-900 dark:text-white\",\n          \"x-file-name\": \"ScheduleManagement\",\n          \"x-line-number\": \"70\",\n          \"x-component\": \"h2\",\n          \"x-id\": \"ScheduleManagement_70\",\n          \"x-dynamic\": \"false\",\n          children: \"Manage Timetable\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3\",\n          \"x-file-name\": \"ScheduleManagement\",\n          \"x-line-number\": \"73\",\n          \"x-component\": \"div\",\n          \"x-id\": \"ScheduleManagement_73\",\n          \"x-dynamic\": \"false\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            \"x-file-name\": \"ScheduleManagement\",\n            \"x-line-number\": \"74\",\n            \"x-component\": \"Label\",\n            \"x-id\": \"ScheduleManagement_74\",\n            \"x-dynamic\": \"true\",\n            \"data-debug-wrapper\": \"true\",\n            style: {\n              display: \"contents\"\n            },\n            children: /*#__PURE__*/_jsxDEV(Label, {\n              className: \"text-sm text-gray-600 dark:text-gray-400\",\n              children: \"Select Teacher:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 13\n            }, this)\n          }, void 0, false), /*#__PURE__*/_jsxDEV(Select, {\n            value: selectedTeacher,\n            onValueChange: setSelectedTeacher,\n            children: [/*#__PURE__*/_jsxDEV(SelectTrigger, {\n              className: \"w-48\",\n              \"data-testid\": \"teacher-select\",\n              children: /*#__PURE__*/_jsxDEV(SelectValue, {\n                placeholder: \"Choose teacher\",\n                \"x-file-name\": \"ScheduleManagement\",\n                \"x-line-number\": \"79\",\n                \"x-component\": \"SelectValue\",\n                \"x-id\": \"ScheduleManagement_79\",\n                \"x-dynamic\": \"false\",\n                \"x-excluded\": \"true\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(SelectContent, {\n              children: teachers.map(teacher => /*#__PURE__*/_jsxDEV(\"div\", {\n                \"x-file-name\": \"ScheduleManagement\",\n                \"x-line-number\": \"83\",\n                \"x-component\": \"SelectItem\",\n                \"x-id\": \"ScheduleManagement_83\",\n                \"x-dynamic\": \"true\",\n                \"data-debug-wrapper\": \"true\",\n                style: {\n                  display: \"contents\"\n                },\n                children: /*#__PURE__*/_jsxDEV(SelectItem, {\n                  value: teacher.id,\n                  children: teacher.name\n                }, teacher.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 83,\n                  columnNumber: 19\n                }, this)\n              }, teacher.id, false))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        \"x-file-name\": \"ScheduleManagement\",\n        \"x-line-number\": \"92\",\n        \"x-component\": \"TimetableGrid\",\n        \"x-id\": \"ScheduleManagement_92\",\n        \"x-dynamic\": \"true\",\n        \"data-debug-wrapper\": \"true\",\n        style: {\n          display: \"contents\"\n        },\n        children: /*#__PURE__*/_jsxDEV(TimetableGrid, {\n          schedules: schedules.filter(s => !selectedTeacher || s.teacher_id === selectedTeacher),\n          breakAfter: breakAfter,\n          onCellClick: handleScheduleClick,\n          onEmptyCellClick: handleAddScheduleEntry,\n          isAdmin: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 9\n        }, this)\n      }, void 0, false)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n_s(ScheduleManagement, \"/nSc1qX3BaC/DWmxNoyB58hB95c=\", false, function () {\n  return [useAuth];\n});\n_c = ScheduleManagement;\nexport default ScheduleManagement;\nvar _c;\n$RefreshReg$(_c, \"ScheduleManagement\");","map":{"version":3,"names":["useState","axios","toast","Button","Label","Select","SelectContent","SelectItem","SelectTrigger","SelectValue","TimetableGrid","useAuth","jsxDEV","_jsxDEV","ScheduleManagement","teachers","schedules","breakAfter","apiUrl","onScheduleChange","_s","token","selectedTeacher","setSelectedTeacher","handleAddScheduleEntry","day","period","error","teacher","find","t","id","subject","prompt","className","post","teacher_id","teacher_name","name","class_name","headers","Authorization","success","handleScheduleClick","schedule","window","dispatchEvent","CustomEvent","detail","children","fileName","_jsxFileName","lineNumber","columnNumber","style","display","value","onValueChange","placeholder","map","filter","s","onCellClick","onEmptyCellClick","isAdmin","_c","$RefreshReg$"],"sources":["/home/buffer/Desktop/Exhibition/Computer/NewSSMS/frontend/src/components/ScheduleManagement.js"],"sourcesContent":["import { useState } from 'react';\nimport axios from 'axios';\nimport { toast } from 'sonner';\nimport { Button } from '../components/ui/button';\nimport { Label } from '../components/ui/label';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '../components/ui/select';\nimport TimetableGrid from './TimetableGrid';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst ScheduleManagement = ({\n  teachers,\n  schedules,\n  breakAfter,\n  apiUrl,\n  onScheduleChange,\n}) => {\n  const { token } = useAuth();\n  const [selectedTeacher, setSelectedTeacher] = useState(null);\n\n  const handleAddScheduleEntry = async (day, period) => {\n    if (!selectedTeacher) {\n      toast.error('Please select a teacher first');\n      return;\n    }\n\n    const teacher = teachers.find(t => t.id === selectedTeacher);\n    const subject = prompt('Enter subject name:');\n    const className = prompt('Enter class name:');\n\n    if (!subject || !className) return;\n\n    try {\n      await axios.post(\n        `${apiUrl}/schedules`,\n        {\n          teacher_id: teacher.id,\n          teacher_name: teacher.name,\n          day,\n          period,\n          subject,\n          class_name: className,\n        },\n        {\n          headers: { Authorization: `Bearer ${token}` },\n        }\n      );\n      toast.success('Schedule entry added');\n      onScheduleChange();\n    } catch {\n      toast.error('Failed to add schedule');\n    }\n  };\n\n  const handleScheduleClick = schedule => {\n    // This will be handled by parent component via props\n    // For now, just pass the schedule up\n    window.dispatchEvent(new CustomEvent('editSchedule', { detail: schedule }));\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"glass p-6 rounded-2xl\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\n            Manage Timetable\n          </h2>\n          <div className=\"flex items-center gap-3\">\n            <Label className=\"text-sm text-gray-600 dark:text-gray-400\">\n              Select Teacher:\n            </Label>\n            <Select value={selectedTeacher} onValueChange={setSelectedTeacher}>\n              <SelectTrigger className=\"w-48\" data-testid=\"teacher-select\">\n                <SelectValue placeholder=\"Choose teacher\" />\n              </SelectTrigger>\n              <SelectContent>\n                {teachers.map(teacher => (\n                  <SelectItem key={teacher.id} value={teacher.id}>\n                    {teacher.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n\n        <TimetableGrid\n          schedules={schedules.filter(\n            s => !selectedTeacher || s.teacher_id === selectedTeacher\n          )}\n          breakAfter={breakAfter}\n          onCellClick={handleScheduleClick}\n          onEmptyCellClick={handleAddScheduleEntry}\n          isAdmin={true}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default ScheduleManagement;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}